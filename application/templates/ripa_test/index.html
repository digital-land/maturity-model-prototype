{% extends "ripa_test/base.html" %}
{% block page_title %}RIPA tests | Operations dashboard | Digital Land{% endblock %}


{% block dl_breadcrumbs %}{% endblock %}

{% block main %}
  <main class="app-main-wrapper {{ mainClasses }}" id="main-content" role="main"{% if mainLang %} lang="{{ mainLang }}"{% endif %}>
  {% block content %}
    <h1 class="govuk-heading-l govuk-!-margin-top-6">Data tests</h1>

    <p class="govuk-body-l">Tests run on {{ run_date_time }}</p>
    {% for la in local_authorities %}
        {%  set grid_row = results_grid[la] %}
        <table class="govuk-table">
          <caption class="govuk-table__caption govuk-table__caption--s">Tests passed</caption>
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Local authority</th>
              {% for key in grid_row.keys() %}
                <th scope="col" class="govuk-table__header">{{ key}}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="govuk-table__cell">{{ la }}</td>
              {% for key in grid_row.keys() %}
                <td class="govuk-table__cell" style="font-weight: bold; color: #fff; background-color:{% if grid_row[key] %}#00703c{% else %}#d4351c{% endif %}">
                  {% if grid_row[key] %}
                    Pass
                  {% else %}
                    Fail
                  {%  endif %}
                </td>
              {% endfor %}
            </tr>
          </tbody>
        </table>
    {% endfor %}


  {% endblock content %}
  </main>

{% endblock main %}


{% block footer %}
<div class="dl-sticky-banner__container" data-module="sticky-banner">
    <div class="dl-sticky-banner">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-one-half">
              {# need a macro for this bit, param would set the href #}
              <a href="#btt-hook" class="govuk-link govuk-link--no-visited-state back-to-top__link">
                <svg role="presentation" focusable="false" class="dl-back-to-top__icon" xmlns="http://www.w3.org/2000/svg" width="13" height="17" viewBox="0 0 13 17">
                    <path fill="currentColor" d="M6.5 0L0 6.5 1.4 8l4-4v12.7h2V4l4.3 4L13 6.4z"></path>
                </svg>Back to top
              </a>
            </div>
        </div>
    </div>
</div>
{{ super() }}
{% endblock %}

{% block pageScripts %}
{{ super() }}
{% endblock pageScripts %}
